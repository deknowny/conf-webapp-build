"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{1789:function(e,t,r){r.r(t),r.d(t,{BackendAPIContext:function(){return i},default:function(){return l},useBackendAPIClient:function(){return c}});var n=r(7437),a=r(4429),o=r(2137),s=r(2265);let i=s.createContext(void 0);function l(e){let[t,r]=(0,s.useState)(void 0),l=(0,o.aX3)();return(0,s.useEffect)(()=>{void 0!==l&&r((0,a.eI)({auth:e=>l,baseUrl:"https://".concat("api.confvpnbot.com")}))},[l]),(0,n.jsx)(i.Provider,{value:t,children:e.children})}function c(){return(0,s.useContext)(i)}},7802:function(e,t,r){r.d(t,{M7:function(){return u},ZP:function(){return c}});var n=r(7437),a=r(2265),o=r(1789),s=r(8885),i=r(7482);let l=a.createContext([void 0,()=>{}]);function c(e){let t=(0,o.useBackendAPIClient)(),[r,c]=(0,a.useState)(void 0),u=()=>{void 0!==t&&s.W_({client:t,body:{}}).then(e=>{void 0!==e.data?c(e.data):e.response.status>=500?(0,i.BS)({closeApp:!0}):403===e.response.status?(0,i.tF)({closeApp:!0}):400===e.response.status&&(0,i.z8)({closeApp:!0})}).catch(e=>{console.error("net error",e),(0,i.LV)({closeApp:!0})})};return(0,a.useEffect)(()=>{u()},[t]),(0,n.jsx)(l.Provider,{value:[r,u],children:e.children})}function u(){return(0,a.useContext)(l)}},6646:function(e,t,r){r.d(t,{ZP:function(){return u},i$:function(){return c}});var n=r(7437),a=r(2265),o=r(6920),s=r(5079),i=r(3107);let l=a.createContext(e=>{let{}=e});function c(e){let[t,r]=(0,a.useState)(!1),[c,u]=(0,a.useState)("");return(0,n.jsxs)(l.Provider,{value:e=>{let{text:n,action:a}=e;u(n),a(),t?(r(!1),setTimeout(()=>r(!0),100)):r(!0)},children:[e.children,t&&(0,n.jsx)(i.A9,{style:{zIndex:1e4,textAlign:"center",marginBottom:"var(--tg-safe-area-inset-bottom)"},onClose:()=>r(!1),before:(0,n.jsx)(o.G,{icon:s.LEp}),children:c})]})}function u(){return(0,a.useContext)(l)}},8885:function(e,t,r){r.d(t,{cj:function(){return I},W_:function(){return _}});let n={bodySerializer:e=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString():t)};Object.entries({$body_:"body",$headers_:"headers",$path_:"path",$query_:"query"});let a=async(e,t)=>{let r="function"==typeof t?await t(e):t;return r?"bearer"===e.scheme?"Bearer ".concat(r):"basic"===e.scheme?"Basic ".concat(btoa(r)):r:void 0},o=e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},s=e=>{switch(e){case"form":default:return",";case"pipeDelimited":return"|";case"spaceDelimited":return"%20"}},i=e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},l=e=>{let{allowReserved:t,explode:r,name:n,style:a,value:i}=e;if(!r){let e=(t?i:i.map(e=>encodeURIComponent(e))).join(s(a));switch(a){case"label":return".".concat(e);case"matrix":return";".concat(n,"=").concat(e);case"simple":return e;default:return"".concat(n,"=").concat(e)}}let l=o(a),u=i.map(e=>"label"===a||"simple"===a?t?e:encodeURIComponent(e):c({allowReserved:t,name:n,value:e})).join(l);return"label"===a||"matrix"===a?l+u:u},c=e=>{let{allowReserved:t,name:r,value:n}=e;if(null==n)return"";if("object"==typeof n)throw Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return"".concat(r,"=").concat(t?n:encodeURIComponent(n))},u=e=>{let{allowReserved:t,explode:r,name:n,style:a,value:o,valueOnly:s}=e;if(o instanceof Date)return s?o.toISOString():"".concat(n,"=").concat(o.toISOString());if("deepObject"!==a&&!r){let e=[];Object.entries(o).forEach(r=>{let[n,a]=r;e=[...e,n,t?a:encodeURIComponent(a)]});let r=e.join(",");switch(a){case"form":return"".concat(n,"=").concat(r);case"label":return".".concat(r);case"matrix":return";".concat(n,"=").concat(r);default:return r}}let l=i(a),u=Object.entries(o).map(e=>{let[r,o]=e;return c({allowReserved:t,name:"deepObject"===a?"".concat(n,"[").concat(r,"]"):r,value:o})}).join(l);return"label"===a||"matrix"===a?l+u:u},d=/\{[^{}]+\}/g,f=e=>{let{path:t,url:r}=e,n=r,a=r.match(d);if(a)for(let e of a){let r=!1,a=e.substring(1,e.length-1),o="simple";a.endsWith("*")&&(r=!0,a=a.substring(0,a.length-1)),a.startsWith(".")?(a=a.substring(1),o="label"):a.startsWith(";")&&(a=a.substring(1),o="matrix");let s=t[a];if(null==s)continue;if(Array.isArray(s)){n=n.replace(e,l({explode:r,name:a,style:o,value:s}));continue}if("object"==typeof s){n=n.replace(e,u({explode:r,name:a,style:o,value:s,valueOnly:!0}));continue}if("matrix"===o){n=n.replace(e,";".concat(c({name:a,value:s})));continue}let i=encodeURIComponent("label"===o?".".concat(s):s);n=n.replace(e,i)}return n},p=function(){let{allowReserved:e,array:t,object:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n=>{let a=[];if(n&&"object"==typeof n)for(let o in n){let s=n[o];if(null!=s){if(Array.isArray(s)){let r=l({allowReserved:e,explode:!0,name:o,style:"form",value:s,...t});r&&a.push(r)}else if("object"==typeof s){let t=u({allowReserved:e,explode:!0,name:o,style:"deepObject",value:s,...r});t&&a.push(t)}else{let t=c({allowReserved:e,name:o,value:s});t&&a.push(t)}}}return a.join("&")}},h=e=>{var t;if(!e)return"stream";let r=null===(t=e.split(";")[0])||void 0===t?void 0:t.trim();return r?r.startsWith("application/json")||r.endsWith("+json")?"json":"multipart/form-data"===r?"formData":["application/","audio/","image/","video/"].some(e=>r.startsWith(e))?"blob":r.startsWith("text/")?"text":void 0:void 0},y=async e=>{let{security:t,...r}=e;for(let e of t){var n;let t=await a(e,r.auth);if(!t)continue;let o=null!==(n=e.name)&&void 0!==n?n:"Authorization";switch(e.in){case"query":r.query||(r.query={}),r.query[o]=t;break;case"cookie":r.headers.append("Cookie","".concat(o,"=").concat(t));break;default:r.headers.set(o,t)}return}},b=e=>m({baseUrl:e.baseUrl,path:e.path,query:e.query,querySerializer:"function"==typeof e.querySerializer?e.querySerializer:p(e.querySerializer),url:e.url}),m=e=>{let{baseUrl:t,path:r,query:n,querySerializer:a,url:o}=e,s=(null!=t?t:"")+(o.startsWith("/")?o:"/".concat(o));r&&(s=f({path:r,url:s}));let i=n?a(n):"";return i.startsWith("?")&&(i=i.substring(1)),i&&(s+="?".concat(i)),s},v=(e,t)=>{var r;let n={...e,...t};return(null===(r=n.baseUrl)||void 0===r?void 0:r.endsWith("/"))&&(n.baseUrl=n.baseUrl.substring(0,n.baseUrl.length-1)),n.headers=g(e.headers,t.headers),n},g=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=new Headers;for(let e of t)if(e&&"object"==typeof e)for(let[t,r]of e instanceof Headers?e.entries():Object.entries(e))if(null===r)n.delete(t);else if(Array.isArray(r))for(let e of r)n.append(t,e);else void 0!==r&&n.set(t,"object"==typeof r?JSON.stringify(r):r);return n};class x{clear(){this._fns=[]}getInterceptorIndex(e){return"number"==typeof e?this._fns[e]?e:-1:this._fns.indexOf(e)}exists(e){let t=this.getInterceptorIndex(e);return!!this._fns[t]}eject(e){let t=this.getInterceptorIndex(e);this._fns[t]&&(this._fns[t]=null)}update(e,t){let r=this.getInterceptorIndex(e);return!!this._fns[r]&&(this._fns[r]=t,e)}use(e){return this._fns=[...this._fns,e],this._fns.length-1}constructor(){this._fns=[]}}let j=()=>({error:new x,request:new x,response:new x}),w=p({allowReserved:!1,array:{explode:!0,style:"form"},object:{explode:!0,style:"deepObject"}}),C={"Content-Type":"application/json"},A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...n,headers:C,parseAs:"auto",querySerializer:w,...e}},S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=v(A(),e),r=()=>({...t}),n=j(),a=async e=>{var r,a,o;let s;let i={...t,...e,fetch:null!==(a=null!==(r=e.fetch)&&void 0!==r?r:t.fetch)&&void 0!==a?a:globalThis.fetch,headers:g(t.headers,e.headers)};for(let e of(i.security&&await y({...i,security:i.security}),i.requestValidator&&await i.requestValidator(i),i.body&&i.bodySerializer&&(i.body=i.bodySerializer(i.body)),(void 0===i.body||""===i.body)&&i.headers.delete("Content-Type"),n.request._fns))e&&await e(i);let l=b(i),c=i.fetch,u=await c(l,{...i,body:i.body});for(let e of n.response._fns)e&&(u=await e(u,i));let d={response:u};if(u.ok){let e;if(204===u.status||"0"===u.headers.get("Content-Length"))return{data:{},...d};let t=null!==(o="auto"===i.parseAs?h(u.headers.get("Content-Type")):i.parseAs)&&void 0!==o?o:"json";switch(t){case"arrayBuffer":case"blob":case"formData":case"json":case"text":e=await u[t]();break;case"stream":return{data:u.body,...d}}return"json"===t&&(i.responseValidator&&await i.responseValidator(e),i.responseTransformer&&(e=await i.responseTransformer(e))),{data:e,...d}}let f=await u.text();try{s=JSON.parse(f)}catch(e){}let p=null!=s?s:f,m=p;for(let e of n.error._fns)e&&(m=await e(p,u,i));if(m=m||{},i.throwOnError)throw m;return{error:m,...d}};return{buildUrl:b,connect:e=>a({...e,method:"CONNECT"}),delete:e=>a({...e,method:"DELETE"}),get:e=>a({...e,method:"GET"}),getConfig:r,head:e=>a({...e,method:"HEAD"}),interceptors:n,options:e=>a({...e,method:"OPTIONS"}),patch:e=>a({...e,method:"PATCH"}),post:e=>a({...e,method:"POST"}),put:e=>a({...e,method:"PUT"}),request:a,setConfig:e=>(t=v(t,e),r()),trace:e=>a({...e,method:"TRACE"})}}(A()),_=e=>{var t;return(null!==(t=e.client)&&void 0!==t?t:S).put({security:[{name:"X-TMA-Auth",type:"apiKey"}],url:"/me",...e,headers:{"Content-Type":"application/json",...e.headers}})},I=e=>{var t;return(null!==(t=e.client)&&void 0!==t?t:S).delete({security:[{name:"X-TMA-Auth",type:"apiKey"}],url:"/me/reccurent-payment",...e,headers:{"Content-Type":"application/json",...e.headers}})}},7482:function(e,t,r){r.d(t,{BS:function(){return o},LV:function(){return a},tF:function(){return s},z8:function(){return i}});var n=r(4710);function a(e){let{closeApp:t}=e;(0,n.UaY)({title:"Ошибка соединения",message:"Не удалось установить соединение с сервером. Проверьте ваше подключение к Интернету и попробуйте снова",buttons:[{text:"Хорошо",type:"default",id:"ok"}]}).finally(()=>{t&&n.VwX.close()})}function o(e){let{closeApp:t}=e;(0,n.UaY)({title:"Серверная ошибка",message:"На стороне нашего сервера произошла ошибка. Попробуйте повторить попытку позже.",buttons:[{text:"Хорошо",type:"default",id:"ok"}]}).finally(()=>{t&&n.VwX.close()})}function s(e){let{closeApp:t}=e;(0,n.UaY)({title:"Сессия истекла",message:"Чтобы продолжить, нужно открыть мини-приложение заново в официальном приложении Telegram",buttons:[{text:"Хорошо",type:"default",id:"ok"}]}).finally(()=>{t&&n.VwX.close()})}function i(e){let{closeApp:t}=e;(0,n.UaY)({title:"Неизвестная ошибка",message:"Что-то пошло не так. Попробуйте повторить попытку позже.",buttons:[{text:"Хорошо",type:"default",id:"ok"}]}).finally(()=>{t&&n.VwX.close()})}}}]);